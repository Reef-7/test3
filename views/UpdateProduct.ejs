<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="UpdateProduct.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <style>
        /* UpdateProduct.css */
        .container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            /* Add gap to create spacing between cards */
        }

        .card {
            transition: transform 0.3s ease-in-out;
            height: 150px;
            width: 150px;
            margin-bottom: 20px;
            padding: 10px;
            /* Add padding to create spacing between cards */
            box-sizing: border-box;
            /* Ensure padding does not affect card dimensions */
        }


        .card:hover {
            transform: scale(1.05);
        }

        .pick-card.picked {
            border: 2px solid purple;
        }

        .update-container {
            border: 1px solid #ccc;
            margin-bottom: 20px;
            /* Increase margin-bottom for spacing */
            padding: 10px;
        }

        .update-form {
            margin-top: 10px;
        }

        /* AddProduct.css */
        .form-group {
            margin-bottom: 20px;
        }

        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }

        .btn-primary:hover {
            background-color: #0069d9;
            border-color: #0062cc;
        }

        .btn-success {
            background-color: #28a745;
            border-color: #28a745;
        }

        .btn-success:hover {
            background-color: #218838;
            border-color: #1e7e34;
        }
    </style>
    <title>Update Products</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="/">BloomBoost</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/product-list">Products List</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/user-list">Users List</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/add-product">Add Product</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/update-product">Update Product</a>
                </li>
            </ul>
        </div>
    </nav>

    <center>
        <h1>Select Products to Update</h1>
    </center>

    <div class="container mt-4">
        <div class="row justify-content-center"">
            <% products.forEach(function(product) { %>
                <div class=" col-md-2 mb-4">
            <div class="card pick-card" data-product-id="<%= product._id %>">
                <img src="<%= product.image %>" class="card-img-top" alt="<%= product.title %>"
                    style="max-width: 150px; max-height: 150px;">
            </div>
        </div>
        <% }) %>
    </div>
    </div>

    <div id="selected-products" class="mt-4">
        <% if (selectedProducts.length> 0) { %>
            <h2>Selected Products:</h2>
            <% selectedProducts.forEach(function(product) { %>

                <% }) %>

                    <% } %>
    </div>



    <!-- Add pagination controls -->

    <nav>
        <ul class="pagination">
            <% if (currentPage> 1) { %>
                <li class="page-item">
                    <a class="page-link" href="?page=<%= currentPage - 1 %>">&laquo;</a>
                </li>
                <% } %>
                    <% for (let i=1; i <=totalPages; i++) { %>
                        <li class="page-item <%= currentPage === i ? 'active' : '' %>">
                            <a class="page-link" href="?page=<%= i %>">
                                <%= i %>
                            </a>
                        </li>
                        <% } %>
                            <% if (currentPage < totalPages) { %>
                                <li class="page-item">
                                    <a class="page-link" href="?page=<%= currentPage + 1 %>">&raquo;</a>
                                </li>
                                <% } %>
        </ul>

    </nav>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
            $(".pick-card").on("click", function () {
                $(this).toggleClass("picked");
                $("#selected-products").empty();
                $(".pick-card.picked").each(function () {
                    var productId = $(this).data("product-id");
                    var productTitle = $(this).find(".card-title").text();
                    var updateContainer = '<div class="update-container card mb-3" data-product-id="' + productId + '">' +
                        '<div class="card-body">' +
                        '<h3 class="card-title">' + productTitle + '</h3>' +
                        '<form class="update-form" action="/update-product/' + productId + '" method="POST">' +
                        '<div class="form-group">' +
                        '<label for="title">Title</label>' +
                        '<input type="text" class="form-control" id="title" name="title" value="' + productTitle + '" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="category">Category</label>' +
                        '<input type="text" class="form-control" id="category" name="category" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="brand">Brand</label>' +
                        '<input type="text" class="form-control" id="brand" name="brand" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="quantity">Quantity</label>' +
                        '<input type="text" class="form-control" id="quantity" name="quantity" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="url">URL</label>' +
                        '<input type="text" class="form-control" id="url" name="url" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="highlights">Highlights</label>' +
                        '<input type="text" class="form-control" id="highlights" name="highlights" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="availability">Availability</label>' +
                        '<input type="text" class="form-control" id="availability" name="availability" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="selling_price">Selling Price</label>' +
                        '<input type="number" class="form-control" id="selling_price" name="selling_price" placeholder="Selling Price" step="1" min="0" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="original_price">Original Price</label>' +
                        '<input type="number" class="form-control" id="original_price" name="original_price" placeholder="Original Price" step="1" min="0" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="units">Units</label>' +
                        '<input type="number" class="form-control" id="units" name="units" placeholder="Units" step="1" min="0" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="listing_id">Listing Id</label>' +
                        '<input type="text" class="form-control" id="listing_id" name="listing_id" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="product_id">Product Id</label>' +
                        '<input type="text" class="form-control" id="product_id" name="product_id" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                        '<label for="image">Image</label>' +
                        '<input type="text" class="form-control" id="image" name="image" required>' +
                        '</div>' +
                        '<button type="submit" class="btn btn-primary">Update</button>' +
                        '</form>' +
                        '</div>' +
                        '</div>';

                    $("#selected-products").append(updateContainer);

                });
            });

            $("#end-selection").on("click", function () {
                $(".pick-card.picked").removeClass("picked");
                $("#selected-products").empty();
            });
        });
    </script>
</body>

</html>